# 场景一：项目初始化

## 场景描述

创建一个新的 Node.js 项目，初始化项目配置文件 `package.json`。

## 涉及命令

### 1. npm init

**用途**: 交互式初始化项目，创建 `package.json` 文件

**语法**:
```bash
npm init
```

**说明**: 会依次询问项目名称、版本、描述、入口文件、测试命令、git 仓库、关键词、作者、许可证等信息。

**示例**:
```bash
$ npm init
package name: (my-project) 
version: (1.0.0) 
description: 
entry point: (index.js) 
test command: 
git repository: 
keywords: 
author: 
license: (ISC) 
```

---

### 2. npm init -y

**用途**: 使用默认配置快速初始化项目

**语法**:
```bash
npm init -y
# 或
npm init --yes
```

**说明**: 跳过所有交互式询问，使用默认值创建 `package.json`

**生成的默认 package.json**:
```json
{
  "name": "my-project",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

---

### 3. npm init <initializer>

**用途**: 使用项目初始化器创建特定类型的项目

**语法**:
```bash
npm init <initializer>
```

**常用初始化器**:
- `create-react-app`: 创建 React 应用
- `create-vite`: 创建 Vite 项目
- `create-next-app`: 创建 Next.js 项目
- `create-vue`: 创建 Vue 3 项目

**示例**:
```bash
# 创建 React 应用
npm init react-app my-app

# 创建 Vite 项目
npm init vite@latest my-vue-app -- --template vue

# 创建 Next.js 应用
npm init next-app@latest my-next-app
```

---

## 使用流程

### 流程 1: 标准项目初始化

```bash
# 1. 创建项目目录
mkdir my-project
cd my-project

# 2. 初始化项目
npm init -y

# 3. 编辑 package.json 添加项目信息
# 4. 安装依赖
npm install <package>
```

### 流程 2: 使用初始化器创建项目

```bash
# 直接使用初始化器创建项目
npm init vite@latest my-app -- --template vue

# 或使用 npx
npx create-react-app my-app
```

### 流程 3: 从现有项目初始化

```bash
# 进入已有代码目录
cd existing-project

# 生成 package.json
npm init -y

# 手动编辑 package.json 添加依赖
```

---

## package.json 字段说明

### 必需字段

| 字段 | 说明 | 示例 |
|------|------|------|
| `name` | 包名称（小写、无空格） | `"my-awesome-project"` |
| `version` | 版本号（遵循 semver） | `"1.0.0"` |

### 常用字段

| 字段 | 说明 | 示例 |
|------|------|------|
| `description` | 项目描述 | `"A Node.js project"` |
| `main` | 入口文件 | `"index.js"` |
| `scripts` | 脚本命令 | `{ "start": "node index.js" }` |
| `keywords` | 关键词数组 | `["node", "api"]` |
| `author` | 作者信息 | `"John Doe <john@example.com>"` |
| `license` | 许可证 | `"MIT"` |
| `repository` | 仓库地址 | `{ "type": "git", "url": "..." }` |
| `bugs` | 问题反馈地址 | `{ "url": "https://..." }` |
| `homepage` | 项目主页 | `"https://example.com"` |

### 依赖字段

| 字段 | 说明 |
|------|------|
| `dependencies` | 生产依赖 |
| `devDependencies` | 开发依赖 |
| `peerDependencies` | 同伴依赖 |
| `optionalDependencies` | 可选依赖 |
| `bundleDependencies` | 打包依赖 |

---

## 最佳实践

1. **使用有意义的包名**
   - 使用小写字母
   - 使用连字符分隔单词
   - 避免与已有包名冲突

2. **明确许可证**
   - 开源项目推荐使用 MIT
   - 商业项目使用专有许可证

3. **添加描述和关键词**
   - 帮助其他开发者了解项目
   - 提高包的可发现性

4. **使用 `engines` 字段**
   ```json
   {
     "engines": {
       "node": ">=14.0.0",
       "npm": ">=6.0.0"
     }
   }
   ```

5. **添加 `.npmignore` 文件**
   - 排除不需要发布的文件
   - 减小包体积

---

## 常见问题

### Q: 如何修改默认配置？

```bash
# 设置默认作者
npm config set init-author-name "Your Name"
npm config set init-author-email "you@example.com"
npm config set init-license "MIT"

# 设置默认许可证
npm config set init-license "MIT"
```

### Q: package.json 和 package-lock.json 的区别？

- `package.json`: 描述项目依赖和配置
- `package-lock.json`: 锁定依赖的具体版本，确保可重现的安装

### Q: 如何验证 package.json 格式？

```bash
# 使用 npm 官方工具验证
npm install -g validate-npm-package-name
validate-npm-package-name <package-name>
```

---

## 相关命令

| 命令 | 说明 |
|------|------|
| `npm help init` | 查看 init 命令帮助 |
| `npm config list` | 查看 npm 配置 |
| `npm help package.json` | 查看 package.json 文档 |

---

*最后更新: 2026年2月11日*