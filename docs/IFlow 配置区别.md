# IFlow 总结

## 什么是 MCP

MCP（Model Context Protocol，模型上下文协议）是 AI 领域的“USB接口”，它在大模型和外部工具之间建立标准化连接。

### 核心特点

- **标准化协议**：统一的通信标准，替代碎片化集成
- **安全连接**：可控的双向数据交换
- **功能扩展**：为 AI 助手添加专业工具能力
- **生态丰富**：社区提供数百种 MCP 服务器

---

## 什么是 Sub Agent

Sub Agent 是 iFlow CLI 中的智能分工系统，类似于拥有一个专业团队，每个成员都有自己的专长领域。系统能够根据不同的任务类型自动选择最合适的专业 Agent 来处理您的请求，确保每个任务都能得到最专业的处理。

### 核心特点

| 特点 | 说明 | 优势 |
|:----:|:----:|:----:|
| 专业化分工 | 每个 Sub Agent 针对特定领域优化 | 提高任务处理质量 |
| 工具访问控制 | 不同 Agent 访问不同工具集合 | 安全性和效率兼顾 |
| 智能调度 | 根据任务描述自动选择 Agent | 用户无需手动选择 |
| 模型验证 | 自动验证模型兼容性 | 确保最佳性能表现 |
| 动态扩展 | 支持自定义和第三方 Agent | 满足个性化需求 |

### Agent 类型分类

- **开发类 Agent**：代码审查、前端开发、后端开发、测试等
- **分析类 Agent**：数据分析、性能分析、安全分析等
- **创作类 Agent**：文档编写、内容创作、翻译等
- **运维类 Agent**：部署管理、监控报警、故障诊断等

---

## 什么是 Sub Command

Sub Command 是 iFlow CLI 中的命令市场系统，允许您从在线市场安装专业化的斜杠命令来扩展 CLI 能力。类似于应用商店，您可以浏览、安装、管理各种功能丰富的自定义命令。

### 核心特点

| 特点 | 说明 | 优势 |
|:----:|:----:|:----:|
| 市场化分发 | 从在线市场获取经过验证的命令 | 丰富的功能选择 |
| 即插即用 | 安装后立即可用，无需额外配置 | 简化使用流程 |
| 作用域管理 | 支持项目级和全局级别的命令安装 | 灵活的权限控制 |
| 版本追踪 | 每个命令都有明确的版本信息 | 确保功能稳定性 |
| 社区驱动 | 支持社区贡献和第三方开发 | 持续功能扩展 |

### 作用域层级

- **全局作用域**：安装到 `~/.iflow/commands/`，**所有项目都可使用**
- **项目作用域**：安装到 `{project}/.iflow/commands/`，**仅当前项目可用**
- **优先级规则**：项目级命令优先于全局级命令

---

## 什么是 Hooks

Hooks（钩子）是 iFlow CLI 中的事件驱动机制，允许您在特定的生命周期时间发生时自动执行自定义命令。通过配置 Hooks，您可以实现工具调用前后的自动化处理、环境设置增强、会话停止时的清理操作等功能。

### 主要功能

- **工具调用拦截**：在工具执行前后运行自定义逻辑
- **环境增强**：在会话开始时动态设置环境信息
- **生命周期管理**：在会话或子代理停止时执行清理操作
- **灵活配置**：支持用户级别和项目界别的分层配置
- **安全控制**：可阻止工具执行或修改工具行为

---

## 什么是工作流（Workflow）

工作流将不同的 AI 能力（Agents、Commands、MCP工具）组合成完整的工作流程。通过workflow，您可以创建复杂的自动化任务链，实现从代码分析、开发、测试到部署的全流程自动化。

> 心流开放平台已经预置了大量优秀的工作流。例如小红书发文、深度研究、ppt制作、画流程图等，你可以在心流开放市场中下载安装到本地，再基于您个人独特的需求对工作流进行调整。

> 对于开发者，心流开放平台预置了 github spec、bmad、NioPD、ai-dev-task 等开发者工作流，欢迎大家使用。

---

## 什么是 Skill

Skill 是 iFlow CLI 中的技能市场系统，允许您从在线市场安装专业化的技能包来扩展 CLI 功能。Skill 是一个完整的功能包，可能包含多个文件、依赖项和配置，提供复杂和专业的能力。技能采用目录结构组织，支持资源文件、依赖管理和初始化脚本，适合构建复杂工作流和多步骤任务。

### 核心特点

| 特定 | 说明 | 优势 |
|:----:|:----:|:----:|
| 市场化分发 | 从在线市场获取经过验证的技能包 | 丰富的功能选择 |
| 完整功能包 | 包含多个文件、资源和配置 | 支持复杂场景 |
| 即插即用 | 安装后立即可用，自动执行设置脚本 | 简化使用流程 |
| 作用域管理 | 支持项目级和全局界别的技能安装 | 灵活的权限控制 |
| 版本追踪 | 每个技能都有明确的版本信息 | 确保功能稳定性 |

### 作用域层级

- **全局作用域**：安装到 `~/.iflow/skills/`，**所有项目都可使用**
- **项目作用域**：安装到 `{project}/.iflow/skills/`，**仅当前项目可用**
- **优先级规则**：项目级技能优先于全局级技能

---

## 什么是计划模式

当开发一个比较大的项目或者实现一个复杂的任务时，一般需要先拟定一个计划，再让 CLI 按照计划执行，这样不仅执行更加清晰有效，而且更容易理解和追踪长任务。

### 如何使用

在计划模式下，输入您的需求。CLI 会分析现有代码库，创建工作流程，并生成可以在构建前编辑的可审阅计划。在 CLI 中按 `Shift + Tab` 切换到该模式即可使用。

### 工作原理

1. 根据需求 `todo_write` 更新待办事项列表
2. 按照待办事项列表完成实现计划
3. 用户对计划进行审核
4. 用户让 iFlow 执行计划
