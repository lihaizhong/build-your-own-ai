# 销售数据业务助手 - 项目概述

## 项目简介

销售数据业务助手是一个基于大语言模型（LLM）和 Function Calling 技术实现的智能数据分析系统。该项目利用通义千问（Qwen）大模型的自然语言理解能力，结合结构化数据查询工具，让用户能够通过自然语言对话的方式查询和分析销售数据，无需编写 SQL 语句。

## 核心功能

### 1. 自然语言数据查询
- 通过自然语言对话查询销售数据
- 智能识别用户意图并转换为数据库查询
- 支持复杂的多条件组合查询

### 2. 月度销售分析
- 查询指定月份的销量和销售额
- 计算销量和销售额的环比增长
- 自动生成分析报告

### 3. 区域销售分析
- 按省份统计销售额分布
- 支持自定义时间范围筛选
- 自动计算销售额占比

### 4. 渠道效能分析
- 查询 Top N 销售渠道
- 支持按时间段筛选
- 多维度数据对比

### 5. 自定义 SQL 查询
- 支持执行自定义 SELECT 查询
- 内置安全检查机制
- 结果自动格式化输出

## 应用场景

### 1. 企业销售数据分析
- 日常销售数据快速查询
- 销售趋势分析
- 区域销售对比

### 2. 业务决策支持
- 快速获取关键业务指标
- 数据驱动的决策依据
- 实时业务监控

### 3. 报表自动化
- 自动生成销售报表
- 定期数据汇总
- 格式化数据输出

### 4. 数据探索
- 灵活的数据查询方式
- 快速验证数据假设
- 数据异常发现

## 技术特点

### 1. 自然语言交互
- 无需学习 SQL 语法
- 支持中文自然语言查询
- 智能意图识别

### 2. Function Calling 架构
- 大模型与外部工具的无缝集成
- 可扩展的工具注册机制
- 类型安全的参数传递

### 3. 多数据库支持
- SQLite 轻量级部署
- MySQL 企业级应用
- 统一的数据库抽象层

### 4. 双模式运行
- Web 图形界面模式
- 终端交互模式
- 灵活的部署选择

## 项目结构

```
19-CASE-业务助手/
├── code/                       # 核心代码目录
│   ├── __init__.py            # 模块初始化
│   ├── main.py                # 主程序入口
│   ├── tools.py               # Function Calling 工具
│   ├── db.py                  # 数据库连接模块
│   ├── init_db.py             # 数据初始化脚本
│   └── test_tools.py          # 工具测试文件
├── data/                       # 数据目录
│   ├── sales.db               # SQLite 数据库
│   └── sales_sample.csv       # 示例数据 CSV
├── workspace/                  # 工作空间目录
├── docs/                       # 文档目录
├── README.md                   # 项目说明文档
└── docs/                       # 完整文档体系
    ├── 00-文档索引.md
    ├── 01-项目概述.md
    ├── 02-技术架构.md
    ├── 03-使用指南.md
    ├── 04-代码实现.md
    └── 05-测试和部署.md
```

## 技术栈

### 核心技术
- **Python 3.11+**: 主要编程语言
- **Qwen Agent**: 阿里云大模型 Agent 框架
- **DashScope**: 阿里云大模型 API 服务
- **SQLAlchemy**: 数据库 ORM 框架

### 大模型服务
- **通义千问 (Qwen)**: 大语言模型
- **Function Calling**: 工具调用机制
- **qwen-turbo-latest**: 推荐模型版本

### 数据处理
- **pandas**: 数据处理和分析
- **NumPy**: 数值计算支持

### 数据库支持
- **SQLite**: 轻量级嵌入式数据库
- **MySQL**: 企业级关系数据库
- **mysql-connector-python**: MySQL 连接器

### 日志和配置
- **loguru**: 日志记录
- **python-dotenv**: 环境变量管理

## 性能指标

### 响应性能
- **查询响应时间**: 通常 2-5 秒
- **数据库查询**: 毫秒级响应
- **大模型调用**: 1-3 秒

### 并发能力
- **单实例并发**: 支持 10+ 并发请求
- **数据库连接池**: 默认 10 个连接
- **最大溢出连接**: 20 个

### 数据规模
- **示例数据**: 2000 条销售记录
- **支持数据量**: 百万级记录
- **数据库大小**: 取决于数据量

## 项目价值

### 1. 学习价值
- 理解 Function Calling 技术原理
- 掌握 Agent 系统开发流程
- 学习大模型应用开发最佳实践

### 2. 实用价值
- 快速构建企业数据查询助手
- 降低数据分析门槛
- 提高业务决策效率

### 3. 技术价值
- 展示 LLM + 工具调用架构
- 提供可复用的技术方案
- 推动 AI 技术在企业中的应用

## 与传统方案对比

| 特性 | 传统 BI 工具 | 业务助手 |
|------|-------------|----------|
| 查询方式 | SQL 或可视化操作 | 自然语言对话 |
| 学习成本 | 需要专业培训 | 零门槛使用 |
| 灵活性 | 固定报表模板 | 任意查询组合 |
| 响应速度 | 即时 | 2-5 秒 |
| 扩展性 | 需要开发 | 配置即可扩展 |
| 成本 | 昂贵授权费用 | API 按量计费 |

## 发展规划

### 短期目标
- [x] 完善核心查询功能
- [x] 支持多数据库类型
- [x] 提供完整文档体系
- [ ] 添加更多分析维度

### 中期目标
- [ ] 支持图表可视化
- [ ] 添加数据导出功能
- [ ] 实现多轮对话上下文
- [ ] 支持自定义业务场景

### 长期目标
- [ ] 构建完整的数据分析平台
- [ ] 支持多模态数据交互
- [ ] 实现智能报表生成
- [ ] 企业级权限管理

## 快速体验

### 最小化启动

```bash
# 1. 初始化示例数据
cd practice/19-CASE-业务助手
python code/init_db.py

# 2. 设置数据库连接
export DATABASE_URL="sqlite:///$(pwd)/data/sales.db"

# 3. 启动业务助手
python code/main.py
```

### 典型查询示例

```
用户: 2024年1月的销量是多少？
助手: | 月份    | 总销量 | 总销售额     |
     |---------|--------|-------------|
     | 2024-01 | 1,234  | ¥123,456.78 |

用户: 2024年2月相比1月，销量环比增长多少？
助手: | 指标   | 2024-01 | 2024-02 | 环比增长 |
     |--------|---------|---------|---------|
     | 总销量 | 1,234   | 1,456   | +17.99% |
     | 总销售额 | ¥123,456.78 | ¥145,678.90 | +18.00% |
```

---

*最后更新: 2026年2月22日*
*项目版本: v1.0*
*技术支持: build-your-own-ai项目团队*
