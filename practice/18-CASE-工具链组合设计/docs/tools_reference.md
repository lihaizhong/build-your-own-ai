# 工具参考手册

本文档提供所有工具的详细使用说明，包括输入格式、输出格式和使用示例。

## 工具概览

| 工具名称 | 功能描述 | 输入格式 |
|---------|---------|---------|
| 文本分析工具 | 文本统计、情感分析、关键词提取 | 直接输入文本 |
| 数据转换工具 | JSON/YAML/CSV 互转、格式验证 | `转换类型\|数据内容` |
| 文本处理工具 | 文本清洗、正则匹配、IP/URL 提取 | `处理类型\|文本内容` |
| 网络诊断工具 | Ping、DNS、端口检测、路由追踪 | `诊断类型\|目标地址` |
| 配置分析工具 | 设备配置解析、安全检查 | `分析类型\|配置内容` |
| 日志分析工具 | 日志统计、错误提取、模式识别 | `分析类型\|日志内容` |

---

## 1. 文本分析工具 (TextAnalysisTool)

### 功能描述
分析文本内容，提供统计信息和情感分析。

### 输入格式
```
直接输入文本内容
```

### 输出格式
```
📊 文本分析结果：
----------------------------------------
  字符总数：XX
  字符数(不含空白)：XX
  中文字符数：XX
  英文单词数：XX
  总行数：XX
  高频关键词：词1、词2、词3
  情感倾向：积极/消极/中性
```

### 使用示例

**示例 1：基本分析**
```
输入: 网络工程师是负责计算机网络设计、实施和维护的专业人员。

输出:
📊 文本分析结果：
----------------------------------------
  字符总数：28
  中文字符数：25
  英文单词数：0
  高频关键词：网络、工程师、计算机
  情感倾向：积极
```

**示例 2：技术文档分析**
```
输入: 
防火墙配置是网络安全的重要组成部分。
正确的配置可以有效防止未授权访问。
建议定期检查和更新防火墙规则。

输出:
📊 文本分析结果：
----------------------------------------
  字符总数：52
  总行数：3
  段落数：3
  高频关键词：防火墙、配置、安全
  情感倾向：积极
```

---

## 2. 数据转换工具 (DataConversionTool)

### 功能描述
支持多种数据格式之间的转换和验证。

### 输入格式
```
转换类型|数据内容
```

### 支持的转换类型

| 类型 | 描述 |
|------|------|
| `json2yaml` | JSON 转 YAML |
| `yaml2json` | YAML 转 JSON |
| `json2csv` | JSON 数组转 CSV |
| `validate` | 验证 JSON 格式 |
| `format` | 格式化 JSON |
| `cisco2json` | Cisco 配置转 JSON |

### 使用示例

**示例 1：JSON 转 YAML**
```
输入: json2yaml|{"name": "Router1", "ip": "192.168.1.1", "status": "active"}

输出:
name: Router1
ip: 192.168.1.1
status: active
```

**示例 2：格式化 JSON**
```
输入: format|{"hostname":"Router1","interfaces":["GE0/0","GE0/1"]}

输出:
{
  "hostname": "Router1",
  "interfaces": [
    "GE0/0",
    "GE0/1"
  ]
}
```

**示例 3：验证 JSON**
```
输入: validate|{"valid": true, "count": 42}

输出:
✅ JSON 格式正确
```

**示例 4：Cisco 配置转 JSON**
```
输入: cisco2json|hostname Router1
interface GigabitEthernet0/0
 ip address 192.168.1.1 255.255.255.0

输出:
{
  "hostname": "Router1",
  "interfaces": [
    {
      "name": "GigabitEthernet0/0",
      "config": ["ip address 192.168.1.1 255.255.255.0"]
    }
  ]
}
```

---

## 3. 文本处理工具 (TextProcessingTool)

### 功能描述
文本清洗、分割、正则匹配和提取操作。

### 输入格式
```
处理类型|文本内容
处理类型|参数|文本内容
```

### 支持的处理类型

| 类型 | 描述 | 参数 |
|------|------|------|
| `clean` | 清洗文本（去除多余空白） | 无 |
| `split_line` | 按行分割 | 无 |
| `split_para` | 按段落分割 | 无 |
| `extract_ip` | 提取 IP 地址 | 无 |
| `extract_url` | 提取 URL | 无 |
| `extract_email` | 提取邮箱地址 | 无 |
| `extract_time` | 提取时间戳 | 无 |
| `lowercase` | 转小写 | 无 |
| `uppercase` | 转大写 | 无 |
| `remove_digits` | 移除数字 | 无 |
| `remove_punctuation` | 移除标点符号 | 无 |
| `regex` | 正则匹配 | 正则表达式 |

### 使用示例

**示例 1：提取 IP 地址**
```
输入: extract_ip|服务器 192.168.1.100 连接到 10.0.0.1 失败，错误来自 172.16.0.50

输出:
  1. 192.168.1.100
  2. 10.0.0.1
  3. 172.16.0.50
```

**示例 2：提取 URL**
```
输入: extract_url|访问 https://www.example.com 或 http://test.org/api

输出:
  1. https://www.example.com
  2. http://test.org/api
```

**示例 3：正则匹配**
```
输入: regex|\d{4}-\d{2}-\d{2}|日志日期：2024-01-15 和 2024-02-20

输出:
  1. 2024-01-15
  2. 2024-02-20
```

**示例 4：文本清洗**
```
输入: clean|  这是  一个  有多余空白  的文本  

输出:
这是 一个 有多余空白 的文本
```

---

## 4. 网络诊断工具 (NetworkDiagnosisTool)

### 功能描述
网络连通性测试、DNS 解析、端口检测（模拟实现）。

### 输入格式
```
诊断类型|目标地址
诊断类型|目标地址|端口
```

### 支持的诊断类型

| 类型 | 描述 | 参数 |
|------|------|------|
| `ping` | Ping 测试连通性 | 目标地址 |
| `dns` | DNS 解析查询 | 域名 |
| `port` | 端口检测 | 目标地址、端口 |
| `trace` | 路由追踪 | 目标地址 |
| `check` | 综合连通性检查 | 目标地址 |

### 使用示例

**示例 1：Ping 测试**
```
输入: ping|www.baidu.com

输出:
📡 Ping 测试：www.baidu.com
--------------------------------------------------
正在 Ping www.baidu.com [180.101.50.188] 具有 64 字节的数据:
  来自 180.101.50.188 的回复: 字节=64 时间=15ms TTL=52
  ...
✅ 状态：主机可达
```

**示例 2：DNS 解析**
```
输入: dns|www.google.com

输出:
🔍 DNS 解析查询：www.google.com
--------------------------------------------------
服务器:  dns.google
Address:  8.8.8.8

非权威应答:
  名称:    www.google.com
  Address:  142.250.189.68

✅ DNS 解析成功
```

**示例 3：端口检测**
```
输入: port|192.168.1.1|80

输出:
🔌 端口检测：192.168.1.1:80
--------------------------------------------------
  PORT     STATE    SERVICE
  80/tcp   open     HTTP

✅ 端口 80 开放 (HTTP)
```

**示例 4：综合检查**
```
输入: check|www.baidu.com

输出:
🔎 综合连通性检查：www.baidu.com
==================================================

【DNS 解析】
  ✅ 解析成功: 180.101.50.188

【Ping 测试】
  ✅ 主机可达

【常见端口状态】
  ✅ 80/HTTP: open
  ✅ 443/HTTPS: open
  ❌ 22/SSH: closed

==================================================
检查完成
```

---

## 5. 配置分析工具 (ConfigAnalysisTool)

### 功能描述
网络设备配置解析、安全检查、信息提取。

### 输入格式
```
分析类型|配置内容
```

### 支持的分析类型

| 类型 | 描述 |
|------|------|
| `parse` | 解析配置结构 |
| `security` | 安全配置检查 |
| `summary` | 配置摘要 |
| `interfaces` | 接口配置提取 |
| `routing` | 路由配置提取 |
| `acl` | ACL 配置提取 |
| `vendor` | 识别设备厂商 |

### 使用示例

**示例 1：配置解析**
```
输入: parse|hostname Router1
!
interface GigabitEthernet0/0
 ip address 192.168.1.1 255.255.255.0
!
router ospf 1
 network 192.168.1.0 0.0.0.255 area 0

输出:
📄 配置解析结果：
--------------------------------------------------
  设备名称: Router1
  接口数量: 1
  路由协议: OSPF
  ACL 数量: 0
```

**示例 2：安全检查**
```
输入: security|hostname Router1
!
line vty 0 4
 transport input ssh
!
service password-encryption

输出:
🔒 安全配置检查结果：
--------------------------------------------------
✅ 已通过检查：
   • SSH 远程访问 [高]
   • 禁用 Telnet [高]
   • 密码加密服务 [高]

⚠️ 建议改进：
   • 登录横幅设置 [中]
   • 日志记录 [中]

📊 安全评分：75/100
   状态：一般 ⚠️
```

**示例 3：接口提取**
```
输入: interfaces|interface GigabitEthernet0/0
 description Uplink
 ip address 192.168.1.1 255.255.255.0
 no shutdown

输出:
🔌 接口配置：
--------------------------------------------------

  【GigabitEthernet0/0】
    描述: Uplink
    IP地址: 192.168.1.1/255.255.255.0
    状态: 开启
```

---

## 6. 日志分析工具 (LogAnalysisTool)

### 功能描述
日志统计、错误提取、模式识别和分析。

### 输入格式
```
分析类型|日志内容
```

### 支持的分析类型

| 类型 | 描述 |
|------|------|
| `summary` | 日志统计摘要 |
| `errors` | 提取错误日志 |
| `timeline` | 时间线分析 |
| `ips` | IP 地址统计 |
| `patterns` | 日志模式识别 |
| `firewall` | 防火墙日志分析 |
| `level` | 日志级别统计 |

### 使用示例

**示例 1：日志摘要**
```
输入: summary|2024-01-15 ERROR Connection failed
2024-01-15 INFO Backup completed
2024-01-15 CRITICAL Disk full

输出:
📊 日志统计摘要：
--------------------------------------------------
  总日志行数: 3
  唯一 IP 数: 0

  日志级别分布:
    • ERROR: 1
    • INFO: 1
    • CRITICAL: 1
```

**示例 2：错误提取**
```
输入: errors|2024-01-15 ERROR Connection failed from 192.168.1.100
2024-01-15 INFO Backup completed
2024-01-15 CRITICAL Disk space critical

输出:
❌ 错误日志提取：
--------------------------------------------------

  【CRITICAL】 🔴
    2024-01-15 CRITICAL Disk space critical

  【ERROR】 🟠
    2024-01-15 ERROR Connection failed from 192.168.1.100

  总计发现 2 条异常日志
```

**示例 3：IP 统计**
```
输入: ips|192.168.1.1 connected to 10.0.0.1
Error from 192.168.1.1 to 192.168.1.2
10.0.0.1 response to 192.168.1.1

输出:
🌐 IP 地址统计：
--------------------------------------------------
  总 IP 出现次数: 5
  唯一 IP 数量: 3

  高频 IP 地址 TOP 10:
    • 192.168.1.1: 3 次 [内网]
    • 10.0.0.1: 2 次 [内网]
    • 192.168.1.2: 1 次 [内网]
```

**示例 4：日志级别统计**
```
输入: level|2024-01-15 CRITICAL System down
2024-01-15 ERROR Service failed
2024-01-15 ERROR Connection lost
2024-01-15 WARNING High CPU
2024-01-15 INFO Backup done
2024-01-15 INFO Update completed

输出:
📈 日志级别统计：
--------------------------------------------------
  🔴 CRITICAL       1 ( 16.7%) ███
  🟠 ERROR          2 ( 33.3%) ██████
  🟡 WARNING        1 ( 16.7%) ███
  🟢 INFO           2 ( 33.3%) ██████

  总计: 6
```

---

## 工具组合使用示例

### 场景 1：网络故障诊断
```
用户: 帮我检查 www.baidu.com 是否可达，并分析访问日志中的错误

Agent:
1. 调用网络诊断工具: ping|www.baidu.com
2. 调用日志分析工具: errors|访问日志内容
3. 综合分析并给出建议
```

### 场景 2：配置安全审计
```
用户: 分析这段 Cisco 配置的安全性

Agent:
1. 调用配置分析工具: security|配置内容
2. 提供安全评分和改进建议
```

### 场景 3：日志问题排查
```
用户: 这段日志有什么问题？

Agent:
1. 调用日志分析工具: summary|日志内容
2. 调用日志分析工具: errors|日志内容
3. 总结问题并给出建议
```

---

*最后更新: 2026年2月17日*
*文档版本: v1.0*
*维护团队: build-your-own-ai项目团队*
