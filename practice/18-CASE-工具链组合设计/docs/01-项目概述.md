# LangChain 工具链组合设计 - 项目概述

## 项目简介

LangChain 工具链组合设计项目是一个基于大语言模型(LLM)的网络工程师智能助手，通过 LangChain 框架组合多种专业工具，实现网络故障诊断、配置分析、日志处理等复杂任务的自动化。该项目展示了如何使用 ReAct（推理+行动）模式构建智能 Agent，支持多种 LLM 提供商，提供了完整的交互式命令行界面。

## 核心功能

### 1. 多工具智能组合
- Agent 自主选择合适工具
- 多轮工具调用完成复杂任务
- 工具结果自动反馈和分析

### 2. 六大专业工具

#### 文本分析工具
- 文本统计（字数、字符数、行数）
- 情感分析（积极/消极/中性）
- 关键词提取

#### 数据转换工具
- JSON/YAML/CSV 格式互转
- 数据格式验证
- Cisco 配置转 JSON

#### 文本处理工具
- 文本清洗、分割
- 正则表达式匹配
- IP/URL/邮箱提取

#### 网络诊断工具
- Ping 测试（模拟）
- DNS 解析（模拟）
- 端口检测（模拟）
- 路由追踪（模拟）

#### 配置分析工具
- Cisco/Juniper/Huawei 配置解析
- 安全配置检查
- 接口/路由/ACL 提取

#### 日志分析工具
- 日志统计摘要
- 错误日志提取
- IP 地址统计
- 防火墙日志分析

### 3. 多 LLM 支持
- 通义千问(Tongyi) - 阿里云
- OpenAI GPT 系列

### 4. 交互式界面
- 命令行交互模式
- 演示模式展示功能
- 测试模式验证功能
- 对话记忆管理

## 应用场景

### 1. 网络故障诊断
- 自动执行网络连通性测试
- 分析故障日志定位问题
- 提供解决方案建议

### 2. 设备配置分析
- 解析网络设备配置
- 安全配置合规检查
- 配置差异对比

### 3. 日志分析处理
- 提取关键错误信息
- IP 地址访问统计
- 日志模式识别

### 4. 日常运维支持
- 文本数据处理
- 数据格式转换
- 信息提取整理

## 技术特点

### 1. LangChain 框架集成
- 使用 LangChain 1.2.9+ 版本
- Tool 组件封装自定义工具
- LLM 组件集成多种模型

### 2. ReAct Agent 设计
- 推理(Reasoning) + 行动(Acting) 模式
- 自主决策工具选择
- 多轮交互完成任务

### 3. 模块化工具设计
- 独立的工具类实现
- 统一的输入输出接口
- 易于扩展新工具

### 4. 中文优化
- 中文提示词设计
- 中文日志解析
- 中文响应输出

## 项目结构

```
18-CASE-工具链组合设计/
├── code/                      # 核心代码目录
│   ├── __init__.py           # 模块初始化
│   ├── main.py               # 主程序入口
│   ├── tools/                # 工具模块
│   │   ├── __init__.py       # 工具导出
│   │   ├── text_analysis.py      # 文本分析工具
│   │   ├── data_conversion.py    # 数据转换工具
│   │   ├── text_processing.py    # 文本处理工具
│   │   ├── network_diagnosis.py  # 网络诊断工具
│   │   ├── config_analysis.py    # 配置分析工具
│   │   └── log_analysis.py       # 日志分析工具
│   └── agents/               # Agent 模块
│       ├── __init__.py       # Agent 导出
│       └── network_engineer_agent.py  # 网络工程师 Agent
├── data/                      # 数据目录
├── docs/                      # 文档目录
│   ├── 00-文档索引.md
│   ├── 01-项目概述.md
│   ├── 02-技术架构.md
│   ├── 03-使用指南.md
│   ├── 04-代码实现.md
│   ├── 05-测试和部署.md
│   └── tools_reference.md    # 工具参考手册
├── output/                    # 输出目录
├── tests/                     # 测试文件
│   └── test_tool_chain.py
└── README.md                  # 项目说明文档
```

## 技术栈

### 核心技术
- **Python 3.11+**: 主要编程语言
- **LangChain 1.2.9+**: LLM 应用开发框架
- **LangChain Community**: 社区组件
- **LangChain OpenAI**: OpenAI 集成

### 依赖库
- **langchain >= 1.2.9**: LLM 应用框架
- **langchain-community >= 0.4.1**: 社区组件
- **langchain-openai >= 1.1.7**: OpenAI 集成
- **openai >= 2.17.0**: OpenAI API
- **loguru >= 0.7.3**: 日志记录
- **python-dotenv >= 1.2.1**: 环境变量管理

### LLM 提供商配置

| 提供商 | 环境变量 | 默认模型 |
|--------|----------|----------|
| 通义千问 | `DASHSCOPE_API_KEY` | `qwen-turbo` |
| OpenAI | `OPENAI_API_KEY` | `gpt-4o-mini` |

## 工具集

### 工具列表

| 工具名称 | 功能描述 | 主要方法 |
|----------|----------|----------|
| 文本分析工具 | 文本统计、情感分析、关键词提取 | `run(text)` |
| 数据转换工具 | JSON/YAML/CSV互转、格式验证 | `run("type|data")` |
| 文本处理工具 | 文本清洗、分割、IP/URL提取 | `run("type|data")` |
| 网络诊断工具 | Ping/DNS/端口检测(模拟) | `run("type|target")` |
| 配置分析工具 | 配置解析、安全检查 | `run("type|config")` |
| 日志分析工具 | 日志统计、错误提取 | `run("type|logs")` |

### 工具调用格式

所有工具采用统一的输入格式：
```
"操作类型|数据内容"
"操作类型|参数|数据内容"
```

## 使用示例

### 网络诊断

```
用户: 帮我 ping 一下 www.baidu.com

助手: [调用网络诊断工具]
📡 Ping 测试：www.baidu.com
--------------------------------------------------
正在 Ping www.baidu.com [180.101.50.188] 具有 64 字节的数据:
  来自 180.101.50.188 的回复: 字节=64 时间=15ms TTL=52
✅ 状态：主机可达
```

### 配置分析

```
用户: 分析这段 Cisco 配置的安全性：
hostname Router1
interface GigabitEthernet0/0
 ip address 192.168.1.1 255.255.255.0
!
line vty 0 4
 transport input ssh
!

助手: [调用配置分析工具]
🔒 安全配置检查结果：
--------------------------------------------------
✅ 已通过检查：
   • SSH 远程访问 [高]
   • 禁用 Telnet [高]
⚠️ 建议改进：
   • 密码加密服务 [高]
   • 登录横幅设置 [中]
📊 安全评分：50/100
```

### 日志分析

```
用户: 提取这段日志中的错误：
2024-01-15 ERROR Connection failed
2024-01-15 INFO Backup completed
2024-01-15 CRITICAL Disk full

助手: [调用日志分析工具]
❌ 错误日志提取：
--------------------------------------------------
🔴 【CRITICAL】
    2024-01-15 CRITICAL Disk full

🟠 【ERROR】
    2024-01-15 ERROR Connection failed
```

### 文本处理

```
用户: 从这段文本中提取所有 IP 地址：
服务器 192.168.1.100 连接到 10.0.0.1 失败

助手: [调用文本处理工具]
  1. 192.168.1.100
  2. 10.0.0.1
```

## 运行模式

### 交互模式
```bash
python code/main.py --mode interactive
```
启动交互式对话界面，与 Agent 进行多轮对话。

### 演示模式
```bash
python code/main.py --mode demo
```
展示各工具的功能演示，了解工具能力。

### 测试模式
```bash
python code/main.py --mode test
```
运行单元测试，验证工具功能。

## 项目价值

### 1. 学习价值
- 深入理解 LangChain 框架
- 掌握 ReAct Agent 设计模式
- 学习工具链组合技术

### 2. 实用价值
- 网络工程师日常助手
- 自动化运维支持
- 故障诊断辅助

### 3. 技术价值
- 展示 LLM Agent 应用开发
- 提供工具链组合方案
- 可作为教学和演示项目

## 发展规划

### 短期目标
- [x] 完成核心功能开发
- [x] 支持 6 种专业工具
- [x] 支持多种 LLM 提供商
- [ ] 添加真实网络诊断功能

### 中期目标
- [ ] 支持更多工具类型
- [ ] 添加 Web 界面
- [ ] 实现工具链编排
- [ ] 支持自定义 Agent

### 长期目标
- [ ] 构建完整的网络运维平台
- [ ] 支持多用户协作
- [ ] 集成企业知识库
- [ ] 支持自动化运维工作流

---

*最后更新: 2026年2月17日*
*项目版本: v1.0*
*技术支持: build-your-own-ai项目团队*
