# Query+联网搜索改写项目 - 项目概述

## 项目简介

Query+联网搜索改写项目是一个智能化的查询处理系统，能够自动判断用户查询是否需要联网搜索，并对查询进行针对性改写，生成最优的搜索策略。该项目基于大语言模型（LLM）技术，为RAG系统和智能问答系统提供了强大的联网搜索能力增强。

## 核心功能

### 1. 智能查询分类
- 通过LLM自动判断查询是否需要联网搜索
- 支持6种搜索场景类型的识别
- 提供分类理由和建议平台

### 2. 查询改写优化
- 根据搜索类型进行针对性改写
- 添加时间、地点等限定词
- 提取核心搜索关键词

### 3. 搜索策略生成
- 推荐最适合的搜索平台
- 生成搜索操作符建议
- 生成可直接使用的搜索URL

### 4. 完整处理管道
- 串联分类、改写、策略生成流程
- 支持批量处理和单独调用
- 提供灵活的API接口

## 应用场景

### 1. RAG系统增强
- 判断何时需要联网搜索
- 优化联网搜索的查询效果
- 提升知识库问答的时效性

### 2. 智能问答系统
- 自动识别时效性问题
- 提供联网搜索建议
- 增强问答系统的实时性

### 3. 搜索引擎优化
- 智能查询改写
- 平台推荐策略
- 搜索操作符建议

### 4. AI助手增强
- 提升AI助手的时效性处理能力
- 自动判断知识边界
- 智能联网搜索决策

## 搜索场景类型

### 1. 时效性（TIME_SENSITIVE）
需要最新、即时或当前时间点的信息，如"今天"、"最近"、"最新"等。

**示例查询：**
- "今天的热搜榜是什么？"
- "最新上映的电影有哪些？"
- "今年的诺贝尔奖得主是谁？"

### 2. 天气（WEATHER）
需要天气、气温、空气质量等气象相关信息。

**示例查询：**
- "北京今天的天气？"
- "明天上海会下雨吗？"
- "深圳的空气质量怎么样？"

### 3. 新闻资讯（NEWS）
需要新闻、热点事件、动态报道等资讯信息。

**示例查询：**
- "最新的AI新闻"
- "最近有什么重大事件？"
- "今天的头条新闻是什么？"

### 4. 价格行情（PRICE）
需要股票、汇率、商品价格等实时行情信息。

**示例查询：**
- "苹果公司的股价"
- "今天的油价是多少？"
- "比特币现在的价格"

### 5. 实时数据（REALTIME_DATA）
需要实时变化的数据，如交通、比赛比分、直播状态等。

**示例查询：**
- "比赛比分"
- "交通状况"
- "直播状态"

### 6. 不需要联网（NOT_NEEDED）
可以使用已有知识库回答的通用知识问题。

**示例查询：**
- "什么是RAG技术？"
- "迪士尼乐园在哪里？"
- "Python如何定义函数？"

## 技术特点

### 1. LLM驱动的智能判断
- 使用通义千问等大语言模型
- 准确理解查询语义
- 智能判断搜索需求

### 2. 模块化架构设计
- 分类器、改写器、策略生成器独立可复用
- 支持灵活组合和扩展
- 便于维护和升级

### 3. 多平台支持
- 支持12个主流搜索平台
- 针对不同场景推荐最优平台
- 自动生成搜索URL

### 4. 灵活的API接口
- 完整管道处理
- 单独模块调用
- 批量处理支持

## 项目结构

```
16-Query+联网搜索/
├── code/                       # 核心代码目录
│   ├── __init__.py            # 模块初始化
│   ├── config.py              # 配置管理模块
│   ├── query_classifier.py    # 查询分类器
│   ├── query_rewriter.py      # 查询改写器
│   ├── search_strategy.py     # 搜索策略生成器
│   ├── pipeline.py            # 整合管道
│   └── main.py                # 主程序入口
├── output/                     # 输出目录
├── docs/                       # 文档目录
│   ├── 00-文档索引.md
│   ├── 01-项目概述.md
│   ├── 02-技术架构.md
│   ├── 03-使用指南.md
│   ├── 04-代码实现.md
│   └── 05-测试和部署.md
└── README.md                   # 项目说明文档
```

## 技术栈

### 核心技术
- **Python 3.11+**: 主要编程语言
- **OpenAI SDK**: LLM API调用（兼容阿里云DashScope）
- **通义千问**: 大语言模型服务

### 依赖库
- **openai >= 1.0.0**: OpenAI兼容API
- **python-dotenv >= 1.0.0**: 环境变量管理
- **loguru >= 0.7.0**: 日志记录
- **dataclasses**: 数据类定义（Python标准库）

### API配置
- **模型**: 通义千问 `qwen-max`
- **API**: 阿里云DashScope API（OpenAI兼容模式）
- **Base URL**: `https://dashscope.aliyuncs.com/compatible-mode/v1`

## 搜索平台支持

### 通用搜索引擎
| 平台 | 特点 | 适用场景 |
|------|------|----------|
| Google | 全球最大搜索引擎 | 时效性、新闻、价格 |
| 百度 | 中文优化，本地化强 | 时效性、新闻、天气 |
| 必应 | 微软生态集成 | 时效性、新闻 |

### 社交媒体平台
| 平台 | 特点 | 适用场景 |
|------|------|----------|
| 知乎 | 专业知识问答 | 时效性、新闻 |
| 微博 | 实时热点 | 新闻、实时数据 |
| 微信公众号 | 深度文章 | 新闻、价格 |

### 技术社区
| 平台 | 特点 | 适用场景 |
|------|------|----------|
| GitHub | 开源项目 | 技术时效性 |
| Stack Overflow | 技术问答 | 技术时效性 |

### 财经平台
| 平台 | 特点 | 适用场景 |
|------|------|----------|
| 雪球 | 股票讨论 | 价格行情 |
| 东方财富 | 财经数据 | 价格、新闻 |

### 天气服务
| 平台 | 特点 | 适用场景 |
|------|------|----------|
| 中国天气网 | 官方数据 | 天气查询 |
| 墨迹天气 | 用户体验好 | 天气查询 |

## 性能指标

### 处理速度
- **分类响应**: 1-3秒（取决于LLM响应）
- **改写响应**: 1-3秒
- **策略生成**: 1-3秒
- **完整管道**: 3-9秒

### 准确性
- **分类准确率**: >90%（基于人工评估）
- **改写质量**: 显著提升搜索效果
- **平台推荐**: 高相关性

### 资源占用
- **内存**: <100MB
- **CPU**: 低占用
- **网络**: 仅LLM API调用

## 项目价值

### 1. 学习价值
- 深入理解LLM应用开发
- 掌握Prompt Engineering技巧
- 学习模块化系统设计

### 2. 实用价值
- 提供开箱即用的联网搜索判断
- 支持快速集成到RAG系统
- 为AI应用提供时效性支持

### 3. 技术价值
- 展示LLM在实际场景中的应用
- 提供模块化设计的参考实现
- 推动AI应用的时效性提升

## 发展规划

### 短期目标
- [x] 完成核心功能开发
- [x] 完善文档和示例代码
- [ ] 添加更多搜索平台支持
- [ ] 优化分类准确率

### 中期目标
- [ ] 支持本地缓存和结果存储
- [ ] 添加查询历史分析
- [ ] 实现自适应学习

### 长期目标
- [ ] 支持多语言查询
- [ ] 集成实际搜索能力
- [ ] 构建完整的时效性知识图谱

---

*最后更新: 2026年2月15日*
*项目版本: v1.0*
*技术支持: build-your-own-ai项目团队*
