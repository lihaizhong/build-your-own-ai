# 时间序列模型

## 时间序列分析与回归分析的区别

在选择模型前，我们需要确定 **结果** 与 **变量** 之间的关系。

- 回归分析：目标变量 y 与自变量 x（一个或多个）的相关性。
- 时间序列分析：目标变量 y 与时间的相关性。

- 回归分析擅长的是 **多变量** 与 **目标结果** 之间的分析。
- 时间序列分析建立在 **时间变化** 的基础上，它会分析目标变量的 **趋势**、**周期**、**时期** 和 **不稳定因素** 等。

## 与时间序列分析相关的模型

- 机器学习模型：`AR`、`MA`、`ARMA`、`ARIMA`
- 神经网络：时序大模型都可以进行时间序列预测

应用场景：金融、经济、商业领域等与时间相关的场景。

时间序列分解：

- 平稳序列（stationary series）：基本上 **不存在趋势（Trend）** 的序列，各观察值基本上在某个固定的水平上波动。
- 非平稳序列（non-stationary series）：包含 **趋势**、**季节性** 或 **周期性** 的序列，可以只有一种成分，也可能是多种成分的组合。

- 趋势（trend, T）：时间序列在长时期内呈现出来的某种持续上升或持续下降的变动，也称为长期趋势。
- 季节性（seasonality, S）：时间序列在一年内重复出现的周期波动。
- 周期性（cyclicity, C）：通常是由经济环境的变化引起。
- 随机性（irregular, I）：指受偶然因素影响所形成的不规则波动，在时间序列中无法预估。


> 季节是指一种周期性的变化，并不一定是一年中的四季。
> 趋势性是朝着一个方向的持续运动，周期性是涨落相间的交替波动。
> 季节变动的规律比较固定，周期大多为一年；周期性循环波动无固定规律，变动周期多为一年以上，且周期长短不一。

## statsmodels工具

- 提供统计计算，包括描述性统计以及统计模型的估计和推断

主要包括以下子模块：

- 回归模型：线性回归，广义线性模型，线性混合效应
- 方差分析（ANOVA）
- 时间序列分析：AR、ARMA、ARIMA等

## ARIMA模型步骤

1. 观察时间序列数据，是否为平稳序列
2. 对于非平稳时间序列要先进行 d 阶差分运算，化为平稳时间序列
3. 使用 ARIMA(p, d, q) 模型进行训练拟合，找到最优的 (p, d, q) 及训练好的模型
4. 使用训练好的 ARIMA 模型进行预测，并对差分进行还原

ARIMA 用差分将不平稳数据先变得平稳，再用 ARMA 模型

## 关于差分

- 差分 = 序列之间做差值，目的是为了得到平稳的序列，也就是去掉前面数值的影响
- 一次差分为序列之间做一次差值，二次差分为在一次差分的基础上在做一次差分
- $f(x) = x^2$ 若 x = [1, 4, 9, 16, 25...]（x 有二次趋势）

## 赤池信息量准则（Akaike Information Criterion, AIC）

- 定义：一种用于模型选择的统计量，衡量统计模型对数据的拟合程度。
- 作用：在多个备选模型中，选择一个既能很好地拟合数据，又不过于复杂的模型。
- 原理：它建立在信息熵的基础上，在衡量模型拟合度的同时，会惩罚模型参数的数量，以防止过拟合。
- 选择标准：AIC值越低的模型，通常被认为是更优的模型。


