# 时间序列 AI 大赛

ARIMA 是一个跟随式的惯性模型，它很难预测市场的拐点。

ARMA/ARIMA 统计模型的不足：

-   ARMA，要求时序数据是稳定的，现实数据很难符合
-   ARIMA，模型为线性模型，无法处理非线性关系，同时要求数据点的间隔等长，比如 $X_1$ 和 $X_2$ 间隔一个小时，那么 $X_2$ 和 $X_3$ 也间隔一个小时
-   如果数据缺失，则需要使用插值等方法来预估缺失值，然后再使用预估值来进行参数拟合，这样会引入噪音

---

prophet 模型：$y(t) = g(t) + s(t) + h(t) + e$

基于相加模型（additive model）的时间预测，用来精准的拟合非线性的周期趋势

> 亮点：模型添加了 holidays（影响因子），可以很好的对节日带来的活跃数据的突变进行预测

优势：

-   处理数据丢失问题
-   趋势迁移问题（shifts in the trend）
-   异常的数据点（outliers）

-   $g(t)$ 代表 **趋势项**，用来表示时间序列中非周期性的变化
-   $s(t)$ 代表 **周期项**，用来表示时间序列中的周期变化
-   $h(t)$ 代表 **活动效果项**，用来表达时间序列中的一些异常活动，例如 节假日、购物节等
-   $e$ 用来表示不能被模型所描述的异常误差

-   $g(t)$ 趋势项在 Prophet 中有两种实现方法，第一种是 **饱和增长模型**，第二种是 **分段线性模型**
-   $s(t)$ 运用 **傅里叶级数** 作为周期项，使得预测模型具有灵活的周期效应
-   $h(t)$ 实际上，很多节日不是在一年中固定的一天发生

在 Prophet 模型中，用户在进行预测前可以向模型输入活动表格 => Prophet 的预测会更加准确

---

饱和增长

> 通常情况下，增长会有最大容量限制，比如未来 12 个月某 app 在某地区的下载量，最大下载要小于等于该地区手机用户总数
>
> 基于这样的领域知识，分析师可以定义模型的容量限制为 $C(t)$

突变点

> 随着突变点数量的增多，拟合变得更加灵活。在研究趋势成分时，分析师要面临两个基本问题，即过拟合与欠拟合

changepoint_prior_scale 参数，可以调整趋势的灵活性（解决过拟合/欠拟合），参数越大，拟合的时间序列曲线越灵活

| 参数                     | 描述                                                |
| ------------------------ | --------------------------------------------------- |
| growth                   | linear 或者 logistic 用来规定线性或逻辑曲线趋势     |
| changepoints             | 包括潜在突变点的日期列表（不指明则默认为 自动识别） |
| n_changepoints           | 若不指定突变点，则需要提供自动识别的突变点数量      |
| changepoints_prior_scale | 设定自动突变点选择的灵活性                          |

---

prophet 是如何进行突变点分析的？

1. 检测突变点
2. 分段趋势建模
3. 预测未来趋势


