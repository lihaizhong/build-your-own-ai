# MCP与A2A的应用

## MCP与Function Calling的区别

| 类别 | MCP (Model Context Protocol) | Function Calling |
|------|------------------------------|------------------|
| 性质 | 协议 | 功能 |
| 范围 | 通用（多数据源、多功能） | 特定场景（单一数据源或功能） |
| 目标 | 统一接口，实现互操作 | 扩展模型能力 |
| 实现 | 基于标准协议 | 依赖于特定模型实现 |
| 开发复杂度 | 低：通过统一协议实现多源兼容 | 高：需要为每个任务单独开发函数 |
| 复用性 | 高：一次开发，可多场景使用 | 低：函数通常为特定任务设计 |
| 灵活性 | 高：支持动态适配和扩展 | 低：功能扩展需要额外开发 |
| 常见场景 | 复杂场景，如跨平台数据访问与整合 | 简单任务，如天气查询、商品推荐等 |

---

MCP 关键能力

- Resources（知识扩展）：提供结构化数据（如数据库、文档）以增强 AI 的上下文理解。
- Tools（工具调用）：允许 AI 执行外部操作（如发送邮件、查询 GitHub、调用智能合约等）。
- Prompts（提示模版）：预定义的指令模板，优化 AI 的任务执行。

---

A2A 协议五大核心原则：

- 拥抱智能体能力
- 利用现有标准
- 默认安全
- 支持长期任务
- 多模态支持

---

A2A 模块

- Agent Card: 公共元数据文件，位于 `/.well-known/agent.json`，描述智能体的能力、技能、端点 URL 和认证要求，用于能力发现。
- A2A 服务器：暴露 HTTP 端点，实现 A2A 协议方法，管理任务执行。
- A2A 客户端：应用程序或智能体，消费 A2A 服务，通过发送 `tasks/send` 或 `tasks/sendSubscribe` 请求与服务器交互。

---

A2A 组件

| 组件 | 描述 |
|------|------|
| Agent Card | 位于 `/.well-known/agent.json`，描述能力、技能、端点 URL 和认证要求，用于发现。 |
| A2A 服务器 | 实现协议方法，管理任务执行，规格见 GitHub 规格。 |
| A2A 客户端 | 发送请求如 `tasks/send` 或 `tasks/sendSubscribe`，消费 A2A 服务。 |
| 任务 | 核心工作单位，有唯一 ID，状态包括 `submitted`、`working` 等。 |
| 消息 | 通信单位，角色为 `user` 或 `agent`，包含 Parts。 |
| 部分 | 内容单位，包括 `TextPart`、`FilePart`、`DataPart`。 |
| 工件 | 任务输出，包含 Parts。 |
| 流式传输 | 使用 SSE 事件更新长期任务状态。 |
| 推送通知 | 通过 webhook 发送更新。|

---

A2A 工作流程

1. 发现
2. 启动
3. 处理
4. 交互（可选）
5. 完成

---

A2A 与 MCP 是互补的，可以将 A2A 看成是一个电话簿，MCP 看成是工具说明书。

---
