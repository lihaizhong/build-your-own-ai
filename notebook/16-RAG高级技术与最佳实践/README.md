# RAG高级技术与最佳实践

## 都有哪些 RAG 召回的策略，提升召回的质量？

1. 改进检索算法
    - 知识图谱
2. 引入重排序（Reranking）
    - 重排序模型
    - 混合检索
3. 优化查询扩展
    - 相似语义改写

## Query 改写

为什么？

- 提问：口语化的、承接上下文的、模糊的、包含情绪的
- 知识库：陈述性的、客观的

=> 需要一个翻译官的角色，将用户的“口语化查询”转换为“书面化、精确的检索语句”

---

类型：

- 上下文依赖型
- 对比型
- 模糊指代型
- 多意图型
- 反问型
- 意图识别型

## RAG 高效召回方法

- 双向改写
    - query2doc
    - doc2query
- 索引扩展
    - 离散索引扩展
    - 连续索引扩展
    - 混合索引扩展
- Small-to-Big

## 知识库处理

知识库问题生成与检索优化

- 自动生成多样化问题
    - generate_questions_for_chunk()
    - generate_diverse_questions()
- 构建双重检索索引
- 检索评估

---

对话知识沉淀

- 使用 AI 大模型从对话中提取结构化知识
- 支持多种知识类型：事实、问题、流程、注意事项等
- 自动识别用户意图和对话摘要

- extract_knowledge_from_conversation()
- batch_extract_knowledge()
- merge_similar_knowledge()

---

知识库健康度检查

- 完整性检查
- 时效性检查
- 一致性检查
- 综合评分

---

知识库版本管理与性能比较

- 版本创建
- 哈希值计算
- 统计信息
- 版本比较

1. 文本向量化
2. 向量索引构建
3. 版本差异检测
4. 向量检索
5. 性能评估
6. 性能比较
7. 回归测试
